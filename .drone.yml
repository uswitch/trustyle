pipeline:
  install:
    when:
      event: [push]
    image: registry.usw.co/cloud/node-12-puppeteer:375eedad2a24cb6eb85d3a707eeb28629c28615e
    commands:
      - npm install
      - npx lerna exec npm install
      - npx lerna bootstrap

  code_checks:
    when:
      event: [push]
    image: registry.usw.co/cloud/node-12-puppeteer:375eedad2a24cb6eb85d3a707eeb28629c28615e
    commands:
      - npm run eslint:check
      - npm run prettier:check

  build:
    when:
      event: [push]
    image: registry.usw.co/cloud/node-12-puppeteer:375eedad2a24cb6eb85d3a707eeb28629c28615e
    commands:
      - npx lerna run build

  send-percy:
    when:
      event: [push]
    image: registry.usw.co/cloud/node-12-puppeteer:375eedad2a24cb6eb85d3a707eeb28629c28615e
    commands:
      - npm run snapshot
